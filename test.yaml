compilers:
  - api_name: cg152
    display_name: GCC 15.2
    nickname: gcc
  
  - api_name: cg152
    display_name: GCC 15.2 (-std=c99)
    nickname: gcc99
    extra_flags: ["-std=c99"]

  - api_name: cg346
    display_name: GCC 3.4.6
    nickname: gcc3
    local_asm: true
  
  - api_name: cclang2110
    display_name: Clang 21.1.0
    nickname: clang

  - api_name: cclang341
    display_name: Clang 3.4.1
    nickname: clang3

  - api_name: vc_v19_44_VS17_14_x64
    display_name: MSVC v19.44 (Conformant)
    nickname: msvcc
    extra_flags: ["/Zc:preprocessor"]
  
  - api_name: vc_v19_44_VS17_14_x64
    display_name: MSVC v19.44
    nickname: msvc

  - api_name: vc_v19_20_VS16_0_x64
    display_name: MSVC v19.20
    nickname: msvcold

  - api_name: nvc_x86_25_11
    display_name: NVC 25.11
    nickname: nvc

  - api_name: cicc2021100
    display_name: ICC 2021.10.0
    nickname: icc

  - api_name: ccx8632_312
    display_name: CompCert 3.12
    nickname: compcert
    local_compile: true

  - api_name: tinycc0927
    display_name: TCC 0.9.27
    nickname: tcc
    local_compile: true

  - api_name: sdcc450
    display_name: SDCC 4.5.0
    nickname: sdcc
    # These are silly warnings about the optimizer optimizing things away
    extra_flags: ["--disable-warning 110 --disable-warning 126"]
    local_compile: true

tests:
  - group: VA_OPT
    detect_macro: NTRNLVA_IMPL
    file_name: va_opt.h
    prepend_lines:
      - "#define TEST_VA_OPT"
    variants:
      - variant: auto
        auto: true
        include_in_table: false

      - variant: native
        display_name: Native
        detect_value: 1
        prepend_lines:
          - "#define VA_OPT_USE_NATIVE"

      - variant: gnu
        display_name: GNU
        detect_value: 2
        prepend_lines:
          - "#define VA_OPT_USE_GNU"

      - variant: msvc
        display_name: MSVC
        detect_value: 3
        prepend_lines:
          - "#define VA_OPT_USE_MSVC"

      - variant: c99
        display_name: C99
        detect_value: 4
        prepend_lines:
          - "#define VA_OPT_USE_C99"